<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">

<head>
</head>

<body>

<!--

    Need ReservationUtils

-->

<form th:object="${createReservationForm}" method="post" th:fragment="reservation-form">

    <!--

    Only one form is allowed per page

    -->

    <table class="formtable">

        <!-- First name -->
        <tr>
            <td colspan="2">
                <input type="text" class="form-control" placeholder="First name" th:field="*{customerFirstname}"/>
                <div th:if="${#fields.hasErrors('customerFirstname')}" th:errors="*{customerFirstname}">
                    First name error
                </div>
            </td>
        </tr>

        <!-- Last name -->
        <tr>
            <td colspan="2">
                <input type="text" class="form-control" placeholder="Last name" th:field="*{customerLastname}"/>
                <div th:if="${#fields.hasErrors('customerLastname')}" th:errors="*{customerLastname}">Last name error
                </div>
            </td>
        </tr>

        <!-- Phone number -->
        <tr>
            <td colspan="2">
                <input type="text" class="form-control" placeholder="Phone number" th:field="*{customerPhonenumber}"/>
                <div th:if="${#fields.hasErrors('customerPhonenumber')}" th:errors="*{customerPhonenumber}">Phone number
                    error
                </div>
            </td>
        </tr>

        <!-- Places -->
        <tr>
            <td colspan="2">
                <input type="text" class="form-control" placeholder="Number of places" th:field="*{places}"
                       id="reservationPlaces"/>
                <div th:if="${#fields.hasErrors('places')}" th:errors="*{places}">
                    Places errors
                </div>
            </td>
        </tr>

        <!-- Dates check-in / check-out-->

        <tr>
            <td>
                <input type="text" th:field="*{begin}" class="form-control" id="reservationBeginDate"
                       placeholder="Check-in"
                       readonly="readonly"/>
            </td>
            <td>
                <input type="text" th:field="*{end}" class="form-control" id="reservationEndDate"
                       placeholder="Check-out"
                       readonly="readonly"/>
            </td>
        </tr>

        <!-- Resources-->

        <tr>
            <td>
                Room:
            </td>
            <td>
                <select id="reservationSharedResourceSelect" class="form-control" th:field="*{sharedResourceId}">
                    <option th:each="resource : ${sharedResources}"
                            th:value="${resource.getId()}"
                            th:text="${resource.getName()}">Resource name
                    </option>
                </select>
            </td>

        </tr>

        <!-- Misc errors -->

        <tr>
            <td colspan="2">
                <div th:if="${#fields.hasErrors('sharedResourceId')}" th:errors="*{sharedResourceId}">
                    Shared resource error
                </div>
                <div th:if="${#fields.hasErrors('begin')}" th:errors="*{begin}">Check-in error</div>
                <div th:if="${#fields.hasErrors('end')}" th:errors="*{end}">Check-out error</div>
                <div th:if="${#fields.hasErrors('token')}" th:text="'Please update form and try again'">Token error
                </div>
                <div th:if="${errorMessage == null || errorMessage.isEmpty() == false}" th:text="${errorMessage}">Error
                    message
                </div>
            </td>
        </tr>

        <!-- Comment-->

        <tr>
            <td colspan="2">
                <textarea class="form-control" placeholder="Comment" th:field="*{comment}"></textarea>
                <div th:if="${#fields.hasErrors('comment')}" th:errors="*{comment}">Comment error</div>
            </td>
        </tr>

        <!-- Token and submit button -->

        <tr>
            <td colspan="2" style="text-align: right">

                <!-- Add control token -->
                <input type="hidden" id="reservationToken" name="token" th:value="${token}"/>

                <!-- Add reservation and cutomer id -->
                <input type="hidden" id="reservationId" th:field="*{reservationId}"/>
                <input type="hidden" id="customerId" th:field="*{customerId}"/>

                <button type="button" id="reservationDeleteButton"
                        class="btn btn-primary glyphicon glyphicon-trash"></button>
                <button type="submit" class="btn btn-primary">Save reservation</button>
            </td>
        </tr>

    </table>

    <script src="/assets/scripts/reservation-form.js"></script>

</form>
</body>
</html>